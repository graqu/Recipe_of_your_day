"use strict";var popup=document.querySelector(".recipes-popup"),addNewBtn=document.querySelector(".recipes-add-btn"),submitBtn=document.querySelector(".submit-btn"),closePopupBtn=document.querySelector(".popup-cancel"),recipesBox=document.querySelector(".recipes-box"),error=document.querySelector(".popup-error"),allInputs=document.querySelectorAll(".popup-input"),foodNameInput=document.querySelector("#food-name"),foodIngredientsInput=document.querySelector("#ingredients"),foodDescInput=document.querySelector("#food-description"),defaultFood=["spagetti","pasa,meat,sauce","cook Pasta, fry meat and mix all with sauce. Enyoy!"],defaultFood2=["Scrumbled Eggs","Eggs, butter, bread, sausage","fry Eggs and cutted sausage on butter - Eat with bread"],arrToStorage=JSON.parse(localStorage.getItem("arrayKey")),editing=!1,handlePopup=function(){popup.classList.toggle("hide")},checkInputs=function(t){return allInputs.forEach(function(e){0!==e.value.length||(t=!1)}),t},checkSubmit=function(){var e=foodNameInput.value,t=foodIngredientsInput.value,n=foodDescInput.value;checkInputs(!0)&&!editing?(handlePopup(),memoUserItem(e,t,n),createRecipe(e,t,n),clearPopupInputs(),error.classList.add("hide")):checkInputs(!0)&&editing?(handlePopup(),makeChanges(e,t,n),clearPopupInputs(),error.classList.add("hide"),editing=!1):error.classList.remove("hide")},handleExtension=function(e){var t=document.querySelector(".extended"),e=e.target.parentElement.parentElement;null!==t||e.classList.contains("extended")?null===t||e.classList.contains("extended")?e.classList.remove("extended"):(t.classList.remove("extended"),e.classList.add("extended")):e.classList.add("extended")},removeRecipe=function(e){var e=e.target.parentElement.parentElement.parentElement,t=checkNumOfItem(e);memoUserDelete(t),e.remove()},clearPopupInputs=function(){allInputs.forEach(function(e){return e.value=""})},checkNumOfItem=function(e){var t=e.parentElement;return Array.from(t.children).indexOf(e)-2},createRecipe=function(e,t,n){var r=document.createElement("div");r.classList.add("recipe-item"),r.innerHTML=' \n    <div class="recipe-item-heading">\n     <div>\n        <h3 class="recipe-name">'.concat(e,'</h3>\n        <p class="recipe-ingredients">').concat(t,'</p>\n     </div>\n        <div class="recipe-modify-icon recipe-extender" onclick="handleExtension(event)">\n           <i class="fa-solid fa-plus"></i>\n        </div>\n     </div>\n\n     <div class="recipe-introduction">\n     <div class="recipe-introduction-text">\n        <p>').concat(n,'</p>\n     </div>\n     <div class="recipe-modify-icons">\n        <div class="recipe-modify-icon recipe-editor" onclick="runEditor(event)"><i class="fa-solid fa-pen-to-square"></i>\n        </div>\n        <div class="recipe-modify-icon recipe-remover" onclick="removeRecipe(event)"><i class="fa-solid fa-trash"></i></div>\n\n    </div>'),recipesBox.appendChild(r)},runEditor=function(e){var e=e.target.parentElement.parentElement.parentElement,t=e.querySelector(".recipe-name").textContent,n=e.querySelector(".recipe-ingredients").textContent,r=e.querySelector(".recipe-introduction-text").firstElementChild.innerText;e.classList.add("element-in-edition"),foodNameInput.value=t,foodIngredientsInput.value=n,foodDescInput.value=r,editing=!0,handlePopup()},makeChanges=function(e,t,n){var r=document.querySelector(".element-in-edition"),o=r.querySelector(".recipe-name"),a=r.querySelector(".recipe-ingredients"),i=r.querySelector(".recipe-introduction-text"),c=checkNumOfItem(r);o.textContent=e,a.textContent=t,i.firstElementChild.innerText=n,r.classList.remove("element-in-edition"),memoUserChanges(c,e,t,n)},checkNewUser=function(){if(null===arrToStorage)(arrToStorage=[]).push(defaultFood),arrToStorage.push(defaultFood2),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage)),createRecipe(defaultFood[0],defaultFood[1],defaultFood[2]),createRecipe(defaultFood2[0],defaultFood2[1],defaultFood2[2]);else for(var e=0;e<arrToStorage.length;e++)createRecipe(arrToStorage[e][0],arrToStorage[e][1],arrToStorage[e][2])},memoUserItem=function(e,t,n){arrToStorage.push([e,t,n]),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))},memoUserDelete=function(e){arrToStorage.splice(e,1),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))},memoUserChanges=function(e,t,n,r){arrToStorage[e]=[t,n,r],localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))};addNewBtn.addEventListener("click",handlePopup),submitBtn.addEventListener("click",checkSubmit),closePopupBtn.addEventListener("click",handlePopup),checkNewUser();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJwb3B1cCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0J0biIsInN1Ym1pdEJ0biIsImNsb3NlUG9wdXBCdG4iLCJlcnJvciIsImFsbElucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb29kTmFtZUlucHV0IiwiZm9vZEluZ3JlZGllbnRzSW5wdXQiLCJkZWZhdWx0Rm9vZCIsImRlZmF1bHRGb29kMiIsImVkaXRpbmciLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlUG9wdXAiLCJ2YWx1ZSIsImxlbmd0aCIsImNoZWNrSW5wdXRzIiwib2siLCJmb3JFYWNoIiwiZSIsImNoZWNrU3VibWl0IiwibmV3Rm9vZE5hbWUiLCJuZXdGb29kRGVzYyIsImZvb2REZXNjSW5wdXQiLCJtZW1vVXNlckl0ZW0iLCJjcmVhdGVSZWNpcGUiLCJuZXdGb29kSW5ncmVkaWVudHMiLCJjbGVhclBvcHVwSW5wdXRzIiwiY2xhc3NMaXN0IiwiYWRkIiwibWFrZUNoYW5nZXMiLCJoYW5kbGVFeHRlbnNpb24iLCJwYXJlbnRCbG9jayIsIm9wZW5CbG9jayIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyIsImluZGV4T2ZJdGVtIiwiY2hlY2tOdW1PZkl0ZW0iLCJwYXJlbnRUb1JlbW92ZSIsInJlbW92ZSIsInJlbW92ZVJlY2lwZSIsIm1lbW9Vc2VyRGVsZXRlIiwiaXRlbXNCbG9jayIsIkFycmF5IiwiaW5wdXQiLCJjaGlsZHJlbiIsImluZGV4T2YiLCJpdGVtIiwiaW5ncmVkaWVudHMiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJydW5FZGl0b3IiLCJuZXdSZWNpcGVJdGVtIiwicmVjaXBlTmFtZSIsImNvbmNhdCIsInJlY2lwZUluZ3JlZGllbnRzIiwicmVjaXBlc0JveCIsImFwcGVuZENoaWxkIiwiY2hlY2tOZXdVc2VyIiwiYXJyVG9TdG9yYWdlIiwidGV4dENvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlubmVyVGV4dCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZWNpcGVEZXNjcmlwdGlvbiIsImVsZW1lbnRUb0VkaXQiLCJuZXdBcnIiLCJzcGxpY2UiLCJtZW1vVXNlckNoYW5nZXMiLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImkiLCJpbmRleCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBQUEsTUFBQUMsU0FBQUMsY0FBQSxnQkFBQSxFQUdNQyxVQUFZRixTQUFTQyxjQUFjLGtCQUFrQixFQURyREYsVUFBUUMsU0FBU0MsY0FBYyxhQUFpQixFQUNoREMsY0FBWUYsU0FBU0MsY0FBYyxlQUFtQixFQUN0REUsV0FBWUgsU0FBU0MsY0FBYyxjQUFjLEVBQ2pERyxNQUFBQSxTQUFnQkosY0FBU0MsY0FBYyxFQUV2Q0ksVUFBUUwsU0FBU0MsaUJBQWMsY0FBZSxFQUU5Q0ssY0FBWU4sU0FBU08sY0FBaUIsWUFBZSxFQUNyREMscUJBQXlCUCxTQUFBQSxjQUFjLGNBQWEsRUFDcERRLGNBQUFBLFNBQXVCVCxjQUFTQyxtQkFBNEIsRUFHNURTLFlBQWUsQ0FBQSxXQUFZLGtCQUFtQix1REFDOUNDLGFBQ0wsQ0FJRCxpQkFIQywrQkFLRCwwREFFSUMsYUFBZUMsS0FBQUMsTUFBQUMsYUFBQUMsUUFBQSxVQUFBLENBQUEsRUFJYkMsUUFBQUEsQ0FBQUEsRUFJTFgsWUFBa0IsV0FIbEJQLE1BSUdtQixVQUFNQyxPQUFZLE1BQUssQ0FIM0IsRUFLQ0MsWUFBUyxTQUFBQyxHQUFULE9BQ0FmLFVBQUFnQixRQUFBLFNBQUFDLEdBQ21CLElBQXBCQSxFQUFNQyxNQUFBQSxTQUFBQSxFQUFBQSxDQUFBQSxFQUhMLENBSUEsRUFDTUMsQ0FIUCxFQUtPQyxZQUFjQyxXQUhwQixJQU1DVixFQUFhVCxjQUFBVSxNQUNiVSxFQUF3Qm5CLHFCQUFvQlMsTUFDNUNXLEVBQWFKLGNBQWFLLE1BRTFCekIsWUFMR2UsQ0FBQUEsQ0FLWSxHQUFLLENBQUFSLFNBQ3JCSyxZQUFXRyxFQUpW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bmNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnJlY2lwZXMtcG9wdXAnKVxyXG5jb25zdCBhZGROZXdCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjaXBlcy1hZGQtYnRuJylcclxuY29uc3Qgc3VibWl0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1Ym1pdC1idG4nKVxyXG5jb25zdCBjbG9zZVBvcHVwQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWNhbmNlbCcpXHJcbmNvbnN0IHJlY2lwZXNCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjaXBlcy1ib3gnKVxyXG5jb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1lcnJvcicpXHJcblxyXG5jb25zdCBhbGxJbnB1dHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAtaW5wdXQnKVxyXG5jb25zdCBmb29kTmFtZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb2QtbmFtZScpXHJcbmNvbnN0IGZvb2RJbmdyZWRpZW50c0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luZ3JlZGllbnRzJylcclxuY29uc3QgZm9vZERlc2NJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb29kLWRlc2NyaXB0aW9uJylcclxuXHJcbmNvbnN0IGRlZmF1bHRGb29kID0gWydzcGFnZXR0aScsICdwYXNhLG1lYXQsc2F1Y2UnLCAnY29vayBQYXN0YSwgZnJ5IG1lYXQgYW5kIG1peCBhbGwgd2l0aCBzYXVjZS4gRW55b3khJ11cclxuY29uc3QgZGVmYXVsdEZvb2QyID0gW1xyXG5cdCdTY3J1bWJsZWQgRWdncycsXHJcblx0J0VnZ3MsIGJ1dHRlciwgYnJlYWQsIHNhdXNhZ2UnLFxyXG5cdCdmcnkgRWdncyBhbmQgY3V0dGVkIHNhdXNhZ2Ugb24gYnV0dGVyIC0gRWF0IHdpdGggYnJlYWQnLFxyXG5dXHJcbmxldCBhcnJUb1N0b3JhZ2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdhcnJheUtleScpKVxyXG5cclxuLy8vTE9BRCBNQUlOIFZhbHVlc1xyXG5cclxubGV0IGVkaXRpbmcgPSBmYWxzZVxyXG5cclxuLy8vQkFTSUMgZnVuY3Rpb25zXHJcblxyXG5jb25zdCBoYW5kbGVQb3B1cCA9ICgpID0+IHtcclxuXHRwb3B1cC5jbGFzc0xpc3QudG9nZ2xlKCdoaWRlJylcclxufVxyXG5jb25zdCBjaGVja0lucHV0cyA9IG9rID0+IHtcclxuXHRhbGxJbnB1dHMuZm9yRWFjaChlID0+IHtcclxuXHRcdGUudmFsdWUubGVuZ3RoICE9PSAwID8ge30gOiAob2sgPSBmYWxzZSlcclxuXHR9KVxyXG5cdHJldHVybiBva1xyXG59XHJcbmNvbnN0IGNoZWNrU3VibWl0ID0gKCkgPT4ge1xyXG5cdGxldCBvayA9IHRydWVcclxuXHRjb25zdCBuZXdGb29kTmFtZSA9IGZvb2ROYW1lSW5wdXQudmFsdWVcclxuXHRjb25zdCBuZXdGb29kSW5ncmVkaWVudHMgPSBmb29kSW5ncmVkaWVudHNJbnB1dC52YWx1ZVxyXG5cdGNvbnN0IG5ld0Zvb2REZXNjID0gZm9vZERlc2NJbnB1dC52YWx1ZVxyXG5cclxuXHRpZiAoY2hlY2tJbnB1dHMob2spICYmICFlZGl0aW5nKSB7XHJcblx0XHRoYW5kbGVQb3B1cCgpXHJcblx0XHRtZW1vVXNlckl0ZW0obmV3Rm9vZE5hbWUsIG5ld0Zvb2RJbmdyZWRpZW50cywgbmV3Rm9vZERlc2MpXHJcblx0XHRjcmVhdGVSZWNpcGUobmV3Rm9vZE5hbWUsIG5ld0Zvb2RJbmdyZWRpZW50cywgbmV3Rm9vZERlc2MpXHJcblx0XHRjbGVhclBvcHVwSW5wdXRzKClcclxuXHRcdGVycm9yLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxyXG5cdH0gZWxzZSBpZiAoY2hlY2tJbnB1dHMob2spICYmIGVkaXRpbmcpIHtcclxuXHRcdGhhbmRsZVBvcHVwKClcclxuXHRcdG1ha2VDaGFuZ2VzKG5ld0Zvb2ROYW1lLCBuZXdGb29kSW5ncmVkaWVudHMsIG5ld0Zvb2REZXNjKVxyXG5cdFx0Y2xlYXJQb3B1cElucHV0cygpXHJcblx0XHRlcnJvci5jbGFzc0xpc3QuYWRkKCdoaWRlJylcclxuXHRcdGVkaXRpbmcgPSBmYWxzZVxyXG5cdH0gZWxzZSB7XHJcblx0XHRlcnJvci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRlJylcclxuXHRcdC8vIGNvbnNvbGUubG9nKCdjemVnb8WbIGJyYWt1amUnKVxyXG5cdH1cclxufVxyXG5jb25zdCBoYW5kbGVFeHRlbnNpb24gPSBlID0+IHtcclxuXHRjb25zdCBvcGVuQmxvY2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZXh0ZW5kZWQnKVxyXG5cdGNvbnN0IHBhcmVudEJsb2NrID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XHJcblxyXG5cdGlmIChvcGVuQmxvY2sgPT09IG51bGwgJiYgIXBhcmVudEJsb2NrLmNsYXNzTGlzdC5jb250YWlucygnZXh0ZW5kZWQnKSkge1xyXG5cdFx0cGFyZW50QmxvY2suY2xhc3NMaXN0LmFkZCgnZXh0ZW5kZWQnKVxyXG5cdH0gZWxzZSBpZiAob3BlbkJsb2NrICE9PSBudWxsICYmICFwYXJlbnRCbG9jay5jbGFzc0xpc3QuY29udGFpbnMoJ2V4dGVuZGVkJykpIHtcclxuXHRcdG9wZW5CbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdleHRlbmRlZCcpXHJcblx0XHRwYXJlbnRCbG9jay5jbGFzc0xpc3QuYWRkKCdleHRlbmRlZCcpXHJcblx0fSBlbHNlIHtcclxuXHRcdHBhcmVudEJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2V4dGVuZGVkJylcclxuXHR9XHJcbn1cclxuY29uc3QgcmVtb3ZlUmVjaXBlID0gZSA9PiB7XHJcblx0Y29uc3QgcGFyZW50VG9SZW1vdmUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG5cdGNvbnN0IGluZGV4T2ZJdGVtID0gY2hlY2tOdW1PZkl0ZW0ocGFyZW50VG9SZW1vdmUpXHJcblxyXG5cdG1lbW9Vc2VyRGVsZXRlKGluZGV4T2ZJdGVtKVxyXG5cdHBhcmVudFRvUmVtb3ZlLnJlbW92ZSgpXHJcbn1cclxuY29uc3QgY2xlYXJQb3B1cElucHV0cyA9ICgpID0+IHtcclxuXHRhbGxJbnB1dHMuZm9yRWFjaChpbnB1dCA9PiAoaW5wdXQudmFsdWUgPSAnJykpXHJcbn1cclxuXHJcbmNvbnN0IGNoZWNrTnVtT2ZJdGVtID0gaXRlbSA9PiB7XHJcblx0Y29uc3QgaXRlbXNCbG9jayA9IGl0ZW0ucGFyZW50RWxlbWVudFxyXG5cdHJldHVybiBBcnJheS5mcm9tKGl0ZW1zQmxvY2suY2hpbGRyZW4pLmluZGV4T2YoaXRlbSkgLSAyXHJcbn1cclxuXHJcbi8vLyBNQUlOIFByb2dyYW0gTW9kdWxlc1xyXG5cclxuY29uc3QgY3JlYXRlUmVjaXBlID0gKG5hbWUsIGluZ3JlZGllbnRzLCBkZXNjcmlwdGlvbikgPT4ge1xyXG5cdGNvbnN0IG5ld1JlY2lwZUl0ZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG5cdG5ld1JlY2lwZUl0ZW0uY2xhc3NMaXN0LmFkZCgncmVjaXBlLWl0ZW0nKVxyXG5cdG5ld1JlY2lwZUl0ZW0uaW5uZXJIVE1MID0gYCBcclxuICAgIDxkaXYgY2xhc3M9XCJyZWNpcGUtaXRlbS1oZWFkaW5nXCI+XHJcbiAgICAgPGRpdj5cclxuICAgICAgICA8aDMgY2xhc3M9XCJyZWNpcGUtbmFtZVwiPiR7bmFtZX08L2gzPlxyXG4gICAgICAgIDxwIGNsYXNzPVwicmVjaXBlLWluZ3JlZGllbnRzXCI+JHtpbmdyZWRpZW50c308L3A+XHJcbiAgICAgPC9kaXY+XHJcbiAgICAgICAgPGRpdiBjbGFzcz1cInJlY2lwZS1tb2RpZnktaWNvbiByZWNpcGUtZXh0ZW5kZXJcIiBvbmNsaWNrPVwiaGFuZGxlRXh0ZW5zaW9uKGV2ZW50KVwiPlxyXG4gICAgICAgICAgIDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGx1c1wiPjwvaT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICA8L2Rpdj5cclxuXHJcbiAgICAgPGRpdiBjbGFzcz1cInJlY2lwZS1pbnRyb2R1Y3Rpb25cIj5cclxuICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLWludHJvZHVjdGlvbi10ZXh0XCI+XHJcbiAgICAgICAgPHA+JHtkZXNjcmlwdGlvbn08L3A+XHJcbiAgICAgPC9kaXY+XHJcbiAgICAgPGRpdiBjbGFzcz1cInJlY2lwZS1tb2RpZnktaWNvbnNcIj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLW1vZGlmeS1pY29uIHJlY2lwZS1lZGl0b3JcIiBvbmNsaWNrPVwicnVuRWRpdG9yKGV2ZW50KVwiPjxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGVuLXRvLXNxdWFyZVwiPjwvaT5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLW1vZGlmeS1pY29uIHJlY2lwZS1yZW1vdmVyXCIgb25jbGljaz1cInJlbW92ZVJlY2lwZShldmVudClcIj48aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPjwvZGl2PlxyXG5cclxuICAgIDwvZGl2PmBcclxuXHRyZWNpcGVzQm94LmFwcGVuZENoaWxkKG5ld1JlY2lwZUl0ZW0pXHJcbn1cclxuXHJcbmNvbnN0IHJ1bkVkaXRvciA9IGUgPT4ge1xyXG5cdGNvbnN0IHBhcmVudEJsb2NrID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuXHRjb25zdCByZWNpcGVOYW1lID0gcGFyZW50QmxvY2sucXVlcnlTZWxlY3RvcignLnJlY2lwZS1uYW1lJykudGV4dENvbnRlbnRcclxuXHRjb25zdCByZWNpcGVJbmdyZWRpZW50cyA9IHBhcmVudEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJy5yZWNpcGUtaW5ncmVkaWVudHMnKS50ZXh0Q29udGVudFxyXG5cdGNvbnN0IHJlY2lwZURlc2NyaXB0aW9uID0gcGFyZW50QmxvY2sucXVlcnlTZWxlY3RvcignLnJlY2lwZS1pbnRyb2R1Y3Rpb24tdGV4dCcpLmZpcnN0RWxlbWVudENoaWxkLmlubmVyVGV4dFxyXG5cclxuXHRwYXJlbnRCbG9jay5jbGFzc0xpc3QuYWRkKCdlbGVtZW50LWluLWVkaXRpb24nKVxyXG5cclxuXHRmb29kTmFtZUlucHV0LnZhbHVlID0gcmVjaXBlTmFtZVxyXG5cdGZvb2RJbmdyZWRpZW50c0lucHV0LnZhbHVlID0gcmVjaXBlSW5ncmVkaWVudHNcclxuXHRmb29kRGVzY0lucHV0LnZhbHVlID0gcmVjaXBlRGVzY3JpcHRpb25cclxuXHRlZGl0aW5nID0gdHJ1ZVxyXG5cclxuXHRoYW5kbGVQb3B1cCgpXHJcbn1cclxuY29uc3QgbWFrZUNoYW5nZXMgPSAobmV3Rm9vZE5hbWUsIG5ld0Zvb2RJbmdyZWRpZW50cywgbmV3Rm9vZERlc2MpID0+IHtcclxuXHRjb25zdCBlbGVtZW50VG9FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQtaW4tZWRpdGlvbicpXHJcblx0Y29uc3QgcmVjaXBlTmFtZSA9IGVsZW1lbnRUb0VkaXQucXVlcnlTZWxlY3RvcignLnJlY2lwZS1uYW1lJylcclxuXHRjb25zdCByZWNpcGVJbmdyZWRpZW50cyA9IGVsZW1lbnRUb0VkaXQucXVlcnlTZWxlY3RvcignLnJlY2lwZS1pbmdyZWRpZW50cycpXHJcblx0Y29uc3QgcmVjaXBlRGVzY3JpcHRpb24gPSBlbGVtZW50VG9FZGl0LnF1ZXJ5U2VsZWN0b3IoJy5yZWNpcGUtaW50cm9kdWN0aW9uLXRleHQnKVxyXG5cdGNvbnN0IGluZGV4T2ZJdGVtID0gY2hlY2tOdW1PZkl0ZW0oZWxlbWVudFRvRWRpdClcclxuXHJcblx0cmVjaXBlTmFtZS50ZXh0Q29udGVudCA9IG5ld0Zvb2ROYW1lXHJcblx0cmVjaXBlSW5ncmVkaWVudHMudGV4dENvbnRlbnQgPSBuZXdGb29kSW5ncmVkaWVudHNcclxuXHRyZWNpcGVEZXNjcmlwdGlvbi5maXJzdEVsZW1lbnRDaGlsZC5pbm5lclRleHQgPSBuZXdGb29kRGVzY1xyXG5cclxuXHRlbGVtZW50VG9FZGl0LmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnQtaW4tZWRpdGlvbicpXHJcblx0bWVtb1VzZXJDaGFuZ2VzKGluZGV4T2ZJdGVtLCBuZXdGb29kTmFtZSwgbmV3Rm9vZEluZ3JlZGllbnRzLCBuZXdGb29kRGVzYylcclxufVxyXG5cclxuLy8vIExvY2FsIFN0b3JhZ2UgTWFuYWdlbWVudFxyXG5cclxuY29uc3QgY2hlY2tOZXdVc2VyID0gKCkgPT4ge1xyXG5cdGlmIChhcnJUb1N0b3JhZ2UgPT09IG51bGwpIHtcclxuXHRcdGFyclRvU3RvcmFnZSA9IFtdXHJcblx0XHRhcnJUb1N0b3JhZ2UucHVzaChkZWZhdWx0Rm9vZClcclxuXHRcdGFyclRvU3RvcmFnZS5wdXNoKGRlZmF1bHRGb29kMilcclxuXHRcdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcnJheUtleScsIEpTT04uc3RyaW5naWZ5KGFyclRvU3RvcmFnZSkpXHJcblx0XHQvLyBjb25zb2xlLmxvZyhgLi4uemFrdHVhbGl6b3dhxYJlbSBsb2NhbGhvc3RgKVxyXG5cdFx0Y3JlYXRlUmVjaXBlKGRlZmF1bHRGb29kWzBdLCBkZWZhdWx0Rm9vZFsxXSwgZGVmYXVsdEZvb2RbMl0pXHJcblx0XHRjcmVhdGVSZWNpcGUoZGVmYXVsdEZvb2QyWzBdLCBkZWZhdWx0Rm9vZDJbMV0sIGRlZmF1bHRGb29kMlsyXSlcclxuXHR9IGVsc2Uge1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBhcnJUb1N0b3JhZ2UubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0Y3JlYXRlUmVjaXBlKGFyclRvU3RvcmFnZVtpXVswXSwgYXJyVG9TdG9yYWdlW2ldWzFdLCBhcnJUb1N0b3JhZ2VbaV1bMl0pXHJcblx0XHR9XHJcblx0XHQvLyBjb25zb2xlLmxvZyhgJHthcnJUb1N0b3JhZ2V9IC0gdyBsb2NhbGhvc3QganXFvCBva2ApXHJcblx0fVxyXG59XHJcbmNvbnN0IG1lbW9Vc2VySXRlbSA9IChuYW1lLCBpbmdyZWRpZW50cywgZGVzY3JpcHRpb24pID0+IHtcclxuXHRjb25zdCBuZXdBcnIgPSBbbmFtZSwgaW5ncmVkaWVudHMsIGRlc2NyaXB0aW9uXVxyXG5cdGFyclRvU3RvcmFnZS5wdXNoKG5ld0FycilcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXJyYXlLZXknLCBKU09OLnN0cmluZ2lmeShhcnJUb1N0b3JhZ2UpKVxyXG59XHJcbmNvbnN0IG1lbW9Vc2VyRGVsZXRlID0gaW5kZXggPT4ge1xyXG5cdGFyclRvU3RvcmFnZS5zcGxpY2UoaW5kZXgsIDEpXHJcblx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FycmF5S2V5JywgSlNPTi5zdHJpbmdpZnkoYXJyVG9TdG9yYWdlKSlcclxufVxyXG5jb25zdCBtZW1vVXNlckNoYW5nZXMgPSAoaW5kZXgsIG5ld0Zvb2ROYW1lLCBuZXdGb29kSW5ncmVkaWVudHMsIG5ld0Zvb2REZXNjKSA9PiB7XHJcblx0YXJyVG9TdG9yYWdlW2luZGV4XSA9IFtuZXdGb29kTmFtZSwgbmV3Rm9vZEluZ3JlZGllbnRzLCBuZXdGb29kRGVzY11cclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXJyYXlLZXknLCBKU09OLnN0cmluZ2lmeShhcnJUb1N0b3JhZ2UpKVxyXG59XHJcblxyXG4vL2FkZFVzZXJJdGVtKCd0ZXN0Jywnc2vFgmFkbmlraSB0ZXN0b3dlJywncHJ6eWvFgmFkb3d5IG9waXMnKVxyXG5cclxuLy8vTE9BRCBET00gRXZlbnRzXHJcblxyXG5hZGROZXdCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQb3B1cClcclxuc3VibWl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hlY2tTdWJtaXQpXHJcbmNsb3NlUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVQb3B1cClcclxuY2hlY2tOZXdVc2VyKClcclxuLy8gdXBkYXRlVXNlckRhdGEoYXJyVG9TdG9yYWdlKVxyXG4iXX0=
