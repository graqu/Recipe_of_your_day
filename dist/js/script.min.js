"use strict";var popup=document.querySelector(".recipes-popup"),addNewBtn=document.querySelector(".recipes-add-btn"),submitBtn=document.querySelector(".submit-btn"),closePopupBtn=document.querySelector(".popup-cancel"),recipesBox=document.querySelector(".recipes-box"),error=document.querySelector(".popup-error"),allInputs=document.querySelectorAll(".popup-input"),foodNameInput=document.querySelector("#food-name"),foodIngredientsInput=document.querySelector("#ingredients"),foodDescInput=document.querySelector("#food-description"),defaultFood=["spagetti","pasa,meat,sauce","cook Pasta, fry meat and mix all with sauce. Enyoy!"],defaultFood2=["Scrumbled Eggs","Eggs, butter, bread, sausage","fry Eggs and cutted sausage on butter - Eat with bread"],arrToStorage=JSON.parse(localStorage.getItem("arrayKey")),editing=!1,handlePopup=function(){popup.classList.toggle("hide")},checkInputs=function(t){return allInputs.forEach(function(e){0!==e.value.length||(t=!1)}),t},checkSubmit=function(){var e=foodNameInput.value,t=foodIngredientsInput.value,n=foodDescInput.value;checkInputs(!0)&&!editing?(handlePopup(),memoUserItem(e,t,n),createRecipe(e,t,n),clearPopupInputs(),error.classList.add("hide")):checkInputs(!0)&&editing?(handlePopup(),makeChanges(e,t,n),clearPopupInputs(),error.classList.add("hide"),editing=!1):error.classList.remove("hide")},handleExtension=function(e){var t=document.querySelector(".extended"),e=e.target.parentElement.parentElement;null!==t||e.classList.contains("extended")?null===t||e.classList.contains("extended")?e.classList.remove("extended"):(t.classList.remove("extended"),e.classList.add("extended")):e.classList.add("extended")},removeRecipe=function(e){var e=e.target.parentElement.parentElement.parentElement,t=checkNumOfItem(e);memoUserDelete(t),e.remove()},clearPopupInputs=function(){allInputs.forEach(function(e){return e.value=""})},checkNumOfItem=function(e){var t=e.parentElement;return Array.from(t.children).indexOf(e)-2},createRecipe=function(e,t,n){var r=document.createElement("div");r.classList.add("recipe-item"),r.innerHTML=' \n    <div class="recipe-item-heading">\n     <div>\n        <h3 class="recipe-name">'.concat(e,'</h3>\n        <p class="recipe-ingredients">').concat(t,'</p>\n     </div>\n        <div class="recipe-modify-icon recipe-extender" onclick="handleExtension(event)">\n           <i class="fa-solid fa-plus"></i>\n        </div>\n     </div>\n\n     <div class="recipe-introduction">\n     <div class="recipe-introduction-text">\n        <p>').concat(n,'</p>\n     </div>\n     <div class="recipe-modify-icons">\n        <div class="recipe-modify-icon recipe-editor" onclick="runEditor(event)"><i class="fa-solid fa-pen-to-square"></i>\n        </div>\n        <div class="recipe-modify-icon recipe-remover" onclick="removeRecipe(event)"><i class="fa-solid fa-trash"></i></div>\n\n    </div>'),recipesBox.appendChild(r)},runEditor=function(e){var e=e.target.parentElement.parentElement.parentElement,t=e.querySelector(".recipe-name").textContent,n=e.querySelector(".recipe-ingredients").textContent,r=e.querySelector(".recipe-introduction-text").firstElementChild.innerText;e.classList.add("element-in-edition"),foodNameInput.value=t,foodIngredientsInput.value=n,foodDescInput.value=r,editing=!0,handlePopup()},makeChanges=function(e,t,n){var r=document.querySelector(".element-in-edition"),o=r.querySelector(".recipe-name"),a=r.querySelector(".recipe-ingredients"),i=r.querySelector(".recipe-introduction-text"),c=checkNumOfItem(r);o.textContent=e,a.textContent=t,i.firstElementChild.innerText=n,r.classList.remove("element-in-edition"),memoUserChanges(c,e,t,n)},checkNewUser=function(){if(null===arrToStorage)(arrToStorage=[]).push(defaultFood),arrToStorage.push(defaultFood2),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage)),createRecipe(defaultFood[0],defaultFood[1],defaultFood[2]),createRecipe(defaultFood2[0],defaultFood2[1],defaultFood2[2]);else for(var e=0;e<arrToStorage.length;e++)createRecipe(arrToStorage[e][0],arrToStorage[e][1],arrToStorage[e][2])},memoUserItem=function(e,t,n){arrToStorage.push([e,t,n]),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))},memoUserDelete=function(e){arrToStorage.splice(e,1),localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))},memoUserChanges=function(e,t,n,r){arrToStorage[e]=[t,n,r],localStorage.setItem("arrayKey",JSON.stringify(arrToStorage))};addNewBtn.addEventListener("click",handlePopup),submitBtn.addEventListener("click",checkSubmit),closePopupBtn.addEventListener("click",function(){error.classList.add("hide"),handlePopup()}),checkNewUser();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJwb3B1cCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZE5ld0J0biIsInN1Ym1pdEJ0biIsImNsb3NlUG9wdXBCdG4iLCJlcnJvciIsImFsbElucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb29kTmFtZUlucHV0IiwiZm9vZEluZ3JlZGllbnRzSW5wdXQiLCJkZWZhdWx0Rm9vZCIsImRlZmF1bHRGb29kMiIsImVkaXRpbmciLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwiaGFuZGxlUG9wdXAiLCJ2YWx1ZSIsImxlbmd0aCIsImNoZWNrSW5wdXRzIiwib2siLCJmb3JFYWNoIiwiZSIsImNoZWNrU3VibWl0IiwibmV3Rm9vZE5hbWUiLCJuZXdGb29kRGVzYyIsImZvb2REZXNjSW5wdXQiLCJtZW1vVXNlckl0ZW0iLCJjcmVhdGVSZWNpcGUiLCJuZXdGb29kSW5ncmVkaWVudHMiLCJjbGVhclBvcHVwSW5wdXRzIiwiY2xhc3NMaXN0IiwiYWRkIiwibWFrZUNoYW5nZXMiLCJoYW5kbGVFeHRlbnNpb24iLCJwYXJlbnRCbG9jayIsIm9wZW5CbG9jayIsInRhcmdldCIsInBhcmVudEVsZW1lbnQiLCJjb250YWlucyIsImluZGV4T2ZJdGVtIiwiY2hlY2tOdW1PZkl0ZW0iLCJwYXJlbnRUb1JlbW92ZSIsInJlbW92ZSIsInJlbW92ZVJlY2lwZSIsIm1lbW9Vc2VyRGVsZXRlIiwiaXRlbXNCbG9jayIsIkFycmF5IiwiaW5wdXQiLCJjaGlsZHJlbiIsImluZGV4T2YiLCJpdGVtIiwiaW5ncmVkaWVudHMiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJydW5FZGl0b3IiLCJuZXdSZWNpcGVJdGVtIiwicmVjaXBlTmFtZSIsImNvbmNhdCIsInJlY2lwZUluZ3JlZGllbnRzIiwicmVjaXBlc0JveCIsImFwcGVuZENoaWxkIiwiY2hlY2tOZXdVc2VyIiwiYXJyVG9TdG9yYWdlIiwidGV4dENvbnRlbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsImlubmVyVGV4dCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJyZWNpcGVEZXNjcmlwdGlvbiIsImVsZW1lbnRUb0VkaXQiLCJuZXdBcnIiLCJzcGxpY2UiLCJtZW1vVXNlckNoYW5nZXMiLCJwdXNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImkiLCJpbmRleCJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBQUEsTUFBQUMsU0FBQUMsY0FBQSxnQkFBQSxFQUdNQyxVQUFZRixTQUFTQyxjQUFjLGtCQUFrQixFQURyREYsVUFBUUMsU0FBU0MsY0FBYyxhQUFpQixFQUNoREMsY0FBWUYsU0FBU0MsY0FBYyxlQUFtQixFQUN0REUsV0FBWUgsU0FBU0MsY0FBYyxjQUFjLEVBQ2pERyxNQUFBQSxTQUFnQkosY0FBU0MsY0FBYyxFQUV2Q0ksVUFBUUwsU0FBU0MsaUJBQWMsY0FBZSxFQUU5Q0ssY0FBWU4sU0FBU08sY0FBaUIsWUFBZSxFQUNyREMscUJBQXlCUCxTQUFBQSxjQUFjLGNBQWEsRUFDcERRLGNBQUFBLFNBQXVCVCxjQUFTQyxtQkFBNEIsRUFHNURTLFlBQWUsQ0FBQSxXQUFZLGtCQUFtQix1REFDOUNDLGFBQ0wsQ0FJRCxpQkFIQywrQkFLRCwwREFFSUMsYUFBZUMsS0FBQUMsTUFBQUMsYUFBQUMsUUFBQSxVQUFBLENBQUEsRUFJYkMsUUFBQUEsQ0FBQUEsRUFJTFgsWUFBa0IsV0FIbEJQLE1BSUdtQixVQUFNQyxPQUFZLE1BQUssQ0FIM0IsRUFLQ0MsWUFBUyxTQUFBQyxHQUFULE9BQ0FmLFVBQUFnQixRQUFBLFNBQUFDLEdBQ21CLElBQXBCQSxFQUFNQyxNQUFBQSxTQUFBQSxFQUFBQSxDQUFBQSxFQUhMLENBSUEsRUFDTUMsQ0FIUCxFQUtPQyxZQUFjQyxXQUhwQixJQU1DVixFQUFhVCxjQUFBVSxNQUNiVSxFQUF3Qm5CLHFCQUFvQlMsTUFDNUNXLEVBQWFKLGNBQWFLLE1BRTFCekIsWUFMR2UsQ0FBQUEsQ0FLWSxHQUFLLENBQUFSLFNBQ3JCSyxZQUFXRyxFQUpW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LCJzb3VyY2VzQ29udGVudCI6WyIvLy9MT0FEIERPTSBFTEVNRU5UU1xyXG5cclxuY29uc3QgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucmVjaXBlcy1wb3B1cCcpXHJcbmNvbnN0IGFkZE5ld0J0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNpcGVzLWFkZC1idG4nKVxyXG5jb25zdCBzdWJtaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0LWJ0bicpXHJcbmNvbnN0IGNsb3NlUG9wdXBCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtY2FuY2VsJylcclxuY29uc3QgcmVjaXBlc0JveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yZWNpcGVzLWJveCcpXHJcbmNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWVycm9yJylcclxuXHJcbmNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC1pbnB1dCcpXHJcbmNvbnN0IGZvb2ROYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9vZC1uYW1lJylcclxuY29uc3QgZm9vZEluZ3JlZGllbnRzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5ncmVkaWVudHMnKVxyXG5jb25zdCBmb29kRGVzY0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvb2QtZGVzY3JpcHRpb24nKVxyXG5cclxuY29uc3QgZGVmYXVsdEZvb2QgPSBbJ3NwYWdldHRpJywgJ3Bhc2EsbWVhdCxzYXVjZScsICdjb29rIFBhc3RhLCBmcnkgbWVhdCBhbmQgbWl4IGFsbCB3aXRoIHNhdWNlLiBFbnlveSEnXVxyXG5jb25zdCBkZWZhdWx0Rm9vZDIgPSBbXHJcblx0J1NjcnVtYmxlZCBFZ2dzJyxcclxuXHQnRWdncywgYnV0dGVyLCBicmVhZCwgc2F1c2FnZScsXHJcblx0J2ZyeSBFZ2dzIGFuZCBjdXR0ZWQgc2F1c2FnZSBvbiBidXR0ZXIgLSBFYXQgd2l0aCBicmVhZCcsXHJcbl1cclxubGV0IGFyclRvU3RvcmFnZSA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2FycmF5S2V5JykpXHJcblxyXG4vLy9MT0FEIE1BSU4gVmFsdWVzXHJcblxyXG5sZXQgZWRpdGluZyA9IGZhbHNlXHJcblxyXG4vLy9CQVNJQyBmdW5jdGlvbnNcclxuXHJcbmNvbnN0IGhhbmRsZVBvcHVwID0gKCkgPT4ge1xyXG5cdHBvcHVwLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGUnKVxyXG59XHJcbmNvbnN0IGNoZWNrSW5wdXRzID0gb2sgPT4ge1xyXG5cdGFsbElucHV0cy5mb3JFYWNoKGUgPT4ge1xyXG5cdFx0ZS52YWx1ZS5sZW5ndGggIT09IDAgPyB7fSA6IChvayA9IGZhbHNlKVxyXG5cdH0pXHJcblx0cmV0dXJuIG9rXHJcbn1cclxuY29uc3QgY2hlY2tTdWJtaXQgPSAoKSA9PiB7XHJcblx0bGV0IG9rID0gdHJ1ZVxyXG5cdGNvbnN0IG5ld0Zvb2ROYW1lID0gZm9vZE5hbWVJbnB1dC52YWx1ZVxyXG5cdGNvbnN0IG5ld0Zvb2RJbmdyZWRpZW50cyA9IGZvb2RJbmdyZWRpZW50c0lucHV0LnZhbHVlXHJcblx0Y29uc3QgbmV3Rm9vZERlc2MgPSBmb29kRGVzY0lucHV0LnZhbHVlXHJcblxyXG5cdGlmIChjaGVja0lucHV0cyhvaykgJiYgIWVkaXRpbmcpIHtcclxuXHRcdGhhbmRsZVBvcHVwKClcclxuXHRcdG1lbW9Vc2VySXRlbShuZXdGb29kTmFtZSwgbmV3Rm9vZEluZ3JlZGllbnRzLCBuZXdGb29kRGVzYylcclxuXHRcdGNyZWF0ZVJlY2lwZShuZXdGb29kTmFtZSwgbmV3Rm9vZEluZ3JlZGllbnRzLCBuZXdGb29kRGVzYylcclxuXHRcdGNsZWFyUG9wdXBJbnB1dHMoKVxyXG5cdFx0ZXJyb3IuY2xhc3NMaXN0LmFkZCgnaGlkZScpXHJcblx0fSBlbHNlIGlmIChjaGVja0lucHV0cyhvaykgJiYgZWRpdGluZykge1xyXG5cdFx0aGFuZGxlUG9wdXAoKVxyXG5cdFx0bWFrZUNoYW5nZXMobmV3Rm9vZE5hbWUsIG5ld0Zvb2RJbmdyZWRpZW50cywgbmV3Rm9vZERlc2MpXHJcblx0XHRjbGVhclBvcHVwSW5wdXRzKClcclxuXHRcdGVycm9yLmNsYXNzTGlzdC5hZGQoJ2hpZGUnKVxyXG5cdFx0ZWRpdGluZyA9IGZhbHNlXHJcblx0fSBlbHNlIHtcclxuXHRcdGVycm9yLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGUnKVxyXG5cdFx0Ly8gY29uc29sZS5sb2coJ2N6ZWdvxZsgYnJha3VqZScpXHJcblx0fVxyXG59XHJcbmNvbnN0IGhhbmRsZUV4dGVuc2lvbiA9IGUgPT4ge1xyXG5cdGNvbnN0IG9wZW5CbG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5leHRlbmRlZCcpXHJcblx0Y29uc3QgcGFyZW50QmxvY2sgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnRcclxuXHJcblx0aWYgKG9wZW5CbG9jayA9PT0gbnVsbCAmJiAhcGFyZW50QmxvY2suY2xhc3NMaXN0LmNvbnRhaW5zKCdleHRlbmRlZCcpKSB7XHJcblx0XHRwYXJlbnRCbG9jay5jbGFzc0xpc3QuYWRkKCdleHRlbmRlZCcpXHJcblx0fSBlbHNlIGlmIChvcGVuQmxvY2sgIT09IG51bGwgJiYgIXBhcmVudEJsb2NrLmNsYXNzTGlzdC5jb250YWlucygnZXh0ZW5kZWQnKSkge1xyXG5cdFx0b3BlbkJsb2NrLmNsYXNzTGlzdC5yZW1vdmUoJ2V4dGVuZGVkJylcclxuXHRcdHBhcmVudEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2V4dGVuZGVkJylcclxuXHR9IGVsc2Uge1xyXG5cdFx0cGFyZW50QmxvY2suY2xhc3NMaXN0LnJlbW92ZSgnZXh0ZW5kZWQnKVxyXG5cdH1cclxufVxyXG5jb25zdCByZW1vdmVSZWNpcGUgPSBlID0+IHtcclxuXHRjb25zdCBwYXJlbnRUb1JlbW92ZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50XHJcblx0Y29uc3QgaW5kZXhPZkl0ZW0gPSBjaGVja051bU9mSXRlbShwYXJlbnRUb1JlbW92ZSlcclxuXHJcblx0bWVtb1VzZXJEZWxldGUoaW5kZXhPZkl0ZW0pXHJcblx0cGFyZW50VG9SZW1vdmUucmVtb3ZlKClcclxufVxyXG5jb25zdCBjbGVhclBvcHVwSW5wdXRzID0gKCkgPT4ge1xyXG5cdGFsbElucHV0cy5mb3JFYWNoKGlucHV0ID0+IChpbnB1dC52YWx1ZSA9ICcnKSlcclxufVxyXG5cclxuY29uc3QgY2hlY2tOdW1PZkl0ZW0gPSBpdGVtID0+IHtcclxuXHRjb25zdCBpdGVtc0Jsb2NrID0gaXRlbS5wYXJlbnRFbGVtZW50XHJcblx0cmV0dXJuIEFycmF5LmZyb20oaXRlbXNCbG9jay5jaGlsZHJlbikuaW5kZXhPZihpdGVtKSAtIDJcclxufVxyXG5cclxuLy8vIE1BSU4gUHJvZ3JhbSBNb2R1bGVzXHJcblxyXG5jb25zdCBjcmVhdGVSZWNpcGUgPSAobmFtZSwgaW5ncmVkaWVudHMsIGRlc2NyaXB0aW9uKSA9PiB7XHJcblx0Y29uc3QgbmV3UmVjaXBlSXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcblx0bmV3UmVjaXBlSXRlbS5jbGFzc0xpc3QuYWRkKCdyZWNpcGUtaXRlbScpXHJcblx0bmV3UmVjaXBlSXRlbS5pbm5lckhUTUwgPSBgIFxyXG4gICAgPGRpdiBjbGFzcz1cInJlY2lwZS1pdGVtLWhlYWRpbmdcIj5cclxuICAgICA8ZGl2PlxyXG4gICAgICAgIDxoMyBjbGFzcz1cInJlY2lwZS1uYW1lXCI+JHtuYW1lfTwvaDM+XHJcbiAgICAgICAgPHAgY2xhc3M9XCJyZWNpcGUtaW5ncmVkaWVudHNcIj4ke2luZ3JlZGllbnRzfTwvcD5cclxuICAgICA8L2Rpdj5cclxuICAgICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLW1vZGlmeS1pY29uIHJlY2lwZS1leHRlbmRlclwiIG9uY2xpY2s9XCJoYW5kbGVFeHRlbnNpb24oZXZlbnQpXCI+XHJcbiAgICAgICAgICAgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wbHVzXCI+PC9pPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgIDwvZGl2PlxyXG5cclxuICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLWludHJvZHVjdGlvblwiPlxyXG4gICAgIDxkaXYgY2xhc3M9XCJyZWNpcGUtaW50cm9kdWN0aW9uLXRleHRcIj5cclxuICAgICAgICA8cD4ke2Rlc2NyaXB0aW9ufTwvcD5cclxuICAgICA8L2Rpdj5cclxuICAgICA8ZGl2IGNsYXNzPVwicmVjaXBlLW1vZGlmeS1pY29uc1wiPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZWNpcGUtbW9kaWZ5LWljb24gcmVjaXBlLWVkaXRvclwiIG9uY2xpY2s9XCJydW5FZGl0b3IoZXZlbnQpXCI+PGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wZW4tdG8tc3F1YXJlXCI+PC9pPlxyXG4gICAgICAgIDwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyZWNpcGUtbW9kaWZ5LWljb24gcmVjaXBlLXJlbW92ZXJcIiBvbmNsaWNrPVwicmVtb3ZlUmVjaXBlKGV2ZW50KVwiPjxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+PC9kaXY+XHJcblxyXG4gICAgPC9kaXY+YFxyXG5cdHJlY2lwZXNCb3guYXBwZW5kQ2hpbGQobmV3UmVjaXBlSXRlbSlcclxufVxyXG5cclxuY29uc3QgcnVuRWRpdG9yID0gZSA9PiB7XHJcblx0Y29uc3QgcGFyZW50QmxvY2sgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudFxyXG5cdGNvbnN0IHJlY2lwZU5hbWUgPSBwYXJlbnRCbG9jay5xdWVyeVNlbGVjdG9yKCcucmVjaXBlLW5hbWUnKS50ZXh0Q29udGVudFxyXG5cdGNvbnN0IHJlY2lwZUluZ3JlZGllbnRzID0gcGFyZW50QmxvY2sucXVlcnlTZWxlY3RvcignLnJlY2lwZS1pbmdyZWRpZW50cycpLnRleHRDb250ZW50XHJcblx0Y29uc3QgcmVjaXBlRGVzY3JpcHRpb24gPSBwYXJlbnRCbG9jay5xdWVyeVNlbGVjdG9yKCcucmVjaXBlLWludHJvZHVjdGlvbi10ZXh0JykuZmlyc3RFbGVtZW50Q2hpbGQuaW5uZXJUZXh0XHJcblxyXG5cdHBhcmVudEJsb2NrLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnQtaW4tZWRpdGlvbicpXHJcblxyXG5cdGZvb2ROYW1lSW5wdXQudmFsdWUgPSByZWNpcGVOYW1lXHJcblx0Zm9vZEluZ3JlZGllbnRzSW5wdXQudmFsdWUgPSByZWNpcGVJbmdyZWRpZW50c1xyXG5cdGZvb2REZXNjSW5wdXQudmFsdWUgPSByZWNpcGVEZXNjcmlwdGlvblxyXG5cdGVkaXRpbmcgPSB0cnVlXHJcblxyXG5cdGhhbmRsZVBvcHVwKClcclxufVxyXG5jb25zdCBtYWtlQ2hhbmdlcyA9IChuZXdGb29kTmFtZSwgbmV3Rm9vZEluZ3JlZGllbnRzLCBuZXdGb29kRGVzYykgPT4ge1xyXG5cdGNvbnN0IGVsZW1lbnRUb0VkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudC1pbi1lZGl0aW9uJylcclxuXHRjb25zdCByZWNpcGVOYW1lID0gZWxlbWVudFRvRWRpdC5xdWVyeVNlbGVjdG9yKCcucmVjaXBlLW5hbWUnKVxyXG5cdGNvbnN0IHJlY2lwZUluZ3JlZGllbnRzID0gZWxlbWVudFRvRWRpdC5xdWVyeVNlbGVjdG9yKCcucmVjaXBlLWluZ3JlZGllbnRzJylcclxuXHRjb25zdCByZWNpcGVEZXNjcmlwdGlvbiA9IGVsZW1lbnRUb0VkaXQucXVlcnlTZWxlY3RvcignLnJlY2lwZS1pbnRyb2R1Y3Rpb24tdGV4dCcpXHJcblx0Y29uc3QgaW5kZXhPZkl0ZW0gPSBjaGVja051bU9mSXRlbShlbGVtZW50VG9FZGl0KVxyXG5cclxuXHRyZWNpcGVOYW1lLnRleHRDb250ZW50ID0gbmV3Rm9vZE5hbWVcclxuXHRyZWNpcGVJbmdyZWRpZW50cy50ZXh0Q29udGVudCA9IG5ld0Zvb2RJbmdyZWRpZW50c1xyXG5cdHJlY2lwZURlc2NyaXB0aW9uLmZpcnN0RWxlbWVudENoaWxkLmlubmVyVGV4dCA9IG5ld0Zvb2REZXNjXHJcblxyXG5cdGVsZW1lbnRUb0VkaXQuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudC1pbi1lZGl0aW9uJylcclxuXHRtZW1vVXNlckNoYW5nZXMoaW5kZXhPZkl0ZW0sIG5ld0Zvb2ROYW1lLCBuZXdGb29kSW5ncmVkaWVudHMsIG5ld0Zvb2REZXNjKVxyXG59XHJcblxyXG4vLy8gTG9jYWwgU3RvcmFnZSBNYW5hZ2VtZW50XHJcblxyXG5jb25zdCBjaGVja05ld1VzZXIgPSAoKSA9PiB7XHJcblx0aWYgKGFyclRvU3RvcmFnZSA9PT0gbnVsbCkge1xyXG5cdFx0YXJyVG9TdG9yYWdlID0gW11cclxuXHRcdGFyclRvU3RvcmFnZS5wdXNoKGRlZmF1bHRGb29kKVxyXG5cdFx0YXJyVG9TdG9yYWdlLnB1c2goZGVmYXVsdEZvb2QyKVxyXG5cdFx0bG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2FycmF5S2V5JywgSlNPTi5zdHJpbmdpZnkoYXJyVG9TdG9yYWdlKSlcclxuXHRcdC8vIGNvbnNvbGUubG9nKGAuLi56YWt0dWFsaXpvd2HFgmVtIGxvY2FsaG9zdGApXHJcblx0XHRjcmVhdGVSZWNpcGUoZGVmYXVsdEZvb2RbMF0sIGRlZmF1bHRGb29kWzFdLCBkZWZhdWx0Rm9vZFsyXSlcclxuXHRcdGNyZWF0ZVJlY2lwZShkZWZhdWx0Rm9vZDJbMF0sIGRlZmF1bHRGb29kMlsxXSwgZGVmYXVsdEZvb2QyWzJdKVxyXG5cdH0gZWxzZSB7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGFyclRvU3RvcmFnZS5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRjcmVhdGVSZWNpcGUoYXJyVG9TdG9yYWdlW2ldWzBdLCBhcnJUb1N0b3JhZ2VbaV1bMV0sIGFyclRvU3RvcmFnZVtpXVsyXSlcclxuXHRcdH1cclxuXHRcdC8vIGNvbnNvbGUubG9nKGAke2FyclRvU3RvcmFnZX0gLSB3IGxvY2FsaG9zdCBqdcW8IG9rYClcclxuXHR9XHJcbn1cclxuY29uc3QgbWVtb1VzZXJJdGVtID0gKG5hbWUsIGluZ3JlZGllbnRzLCBkZXNjcmlwdGlvbikgPT4ge1xyXG5cdGNvbnN0IG5ld0FyciA9IFtuYW1lLCBpbmdyZWRpZW50cywgZGVzY3JpcHRpb25dXHJcblx0YXJyVG9TdG9yYWdlLnB1c2gobmV3QXJyKVxyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcnJheUtleScsIEpTT04uc3RyaW5naWZ5KGFyclRvU3RvcmFnZSkpXHJcbn1cclxuY29uc3QgbWVtb1VzZXJEZWxldGUgPSBpbmRleCA9PiB7XHJcblx0YXJyVG9TdG9yYWdlLnNwbGljZShpbmRleCwgMSlcclxuXHRsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYXJyYXlLZXknLCBKU09OLnN0cmluZ2lmeShhcnJUb1N0b3JhZ2UpKVxyXG59XHJcbmNvbnN0IG1lbW9Vc2VyQ2hhbmdlcyA9IChpbmRleCwgbmV3Rm9vZE5hbWUsIG5ld0Zvb2RJbmdyZWRpZW50cywgbmV3Rm9vZERlc2MpID0+IHtcclxuXHRhcnJUb1N0b3JhZ2VbaW5kZXhdID0gW25ld0Zvb2ROYW1lLCBuZXdGb29kSW5ncmVkaWVudHMsIG5ld0Zvb2REZXNjXVxyXG5cdGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhcnJheUtleScsIEpTT04uc3RyaW5naWZ5KGFyclRvU3RvcmFnZSkpXHJcbn1cclxuXHJcbi8vYWRkVXNlckl0ZW0oJ3Rlc3QnLCdza8WCYWRuaWtpIHRlc3Rvd2UnLCdwcnp5a8WCYWRvd3kgb3BpcycpXHJcblxyXG4vLy9MT0FEIERPTSBFdmVudHNcclxuXHJcbmFkZE5ld0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGhhbmRsZVBvcHVwKVxyXG5zdWJtaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjaGVja1N1Ym1pdClcclxuY2xvc2VQb3B1cEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRlcnJvci5jbGFzc0xpc3QuYWRkKCdoaWRlJylcclxuXHRoYW5kbGVQb3B1cCgpXHJcbn0pXHJcbmNoZWNrTmV3VXNlcigpXHJcbi8vIHVwZGF0ZVVzZXJEYXRhKGFyclRvU3RvcmFnZSlcclxuIl19
